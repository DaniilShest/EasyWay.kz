const itemSlider=new Swiper(".item__slider",{speed:500,spaceBetween:100,autoHeight:!0,navigation:{nextEl:".item-slider-next",prevEl:".item-slider-prev"},thumbs:{swiper:{el:".item__minislider",speed:500,spaceBetween:5,autoHeight:!0,slidesPerView:3,slideThumbActiveClass:"item-minislider__slide-active"}}}),step=document.getElementById("item-constuctor-step"),next=document.getElementById("item-constuctor-next"),prev=document.getElementById("item-constuctor-prev"),price=document.getElementById("item-constuctor-price"),submitBtn=document.getElementById("item-constructor-submit"),points=document.getElementById("item-constuctor-points"),line=document.getElementById("item-constuctor-line"),img=document.getElementById("item-constuctor-img");document.querySelectorAll('a[href^="#"').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();t=this.getAttribute("href").substring(1),t=document.getElementById(t).getBoundingClientRect().top;window.scrollBy({top:t-100,behavior:"smooth"})})});let activeStep=0,constructorCheckbox;const priceArray={0:44e4},pointsArray={},formSteps=[{title:"Высота подъема",options:[{title:"Высота подъема до 1 метра",data:0,img:"./assets/img/item/1.webp"},{title:"Высота подъема до 1,5 метров",data:0,img:"./assets/img/item/2.webp"},{title:"Высота подъема до 2 метров",data:0,img:"./assets/img/item/3.webp"},{title:"Высота подъема до 2,5 метров",data:5e4,img:"./assets/img/item/4.webp"},{title:"Высота подъема до 3 метров",data:5e4,img:"./assets/img/item/5.webp"}]},{title:"Габариты площадки",options:[{title:"1040 х 960 мм.",data:0,img:"./assets/img/item/1.webp"},{title:"1250 х 960 мм.",data:1e4,img:"./assets/img/item/2.webp"}]},{title:"Покрытие площадки",options:[{title:"Перфорированный лист",data:0,img:"./assets/img/item/1.webp"},{title:"Алюминиевый рифленый лист",data:2e4,img:"./assets/img/item/2.webp"}]},{title:"Скат с площадки",options:[{title:"Cтальной (площадка с перфорированным листом)",data:0,img:"./assets/img/item/1.webp"},{title:"Перфорированный (площадка с перфорированным листом)",data:0,img:"./assets/img/item/2.webp"},{title:"Алюминиевый (площадка с алюминиевым рифленым листом)",data:0,img:"./assets/img/item/3.webp"}]},{title:"Заезд/выезд на площадку",options:[{title:"Прямой",data:0,img:"./assets/img/item/1.webp"},{title:"Слева",data:0,img:"./assets/img/item/2.webp"},{title:"Справа",data:0,img:"./assets/img/item/3.webp"},{title:"Прямой и слева",data:0,img:"./assets/img/item/4.webp"},{title:"Прямой и справа",data:0,img:"./assets/img/item/5.webp"}]},{title:"Калитка на нижней посадочной площадке",options:[{title:"Слева",data:0,img:"./assets/img/item/1.webp"},{title:"Справа",data:0,img:"./assets/img/item/2.webp"}]},{title:"Калитка на верхней посадочной площадке",options:[{title:"Слева",data:0,img:"./assets/img/item/1.webp"},{title:"Справа",data:0,img:"./assets/img/item/2.webp"}]},{title:"Поручни",options:[{title:"Круглые",data:0,img:"./assets/img/item/1.webp"},{title:"Квадратные",data:0,img:"./assets/img/item/2.webp"}]},{title:"Ловитель на случай обрыва троса",options:[{title:"Не устанавливать",data:0,img:"./assets/img/item/1.webp"},{title:"Установить",data:5e4,img:"./assets/img/item/2.webp"}]},{title:"Козырек (навес от дождя и снега)",options:[{title:"Не устанавливать",data:0,img:"./assets/img/item/1.webp"},{title:"Установить",data:5e4,img:"./assets/img/item/2.webp"}]},{title:"Крепление подъемного механизма",options:[{title:"Сварное",data:0,img:"./assets/img/item/1.webp"},{title:"Анкерное",data:0,img:"./assets/img/item/2.webp"}]},{title:"Управление подъемным механизмом",options:[{title:"Проводной пульт управления",data:0,img:"./assets/img/item/1.webp"},{title:"Проводной пульт управления (дополнительный)",data:1e4,img:"./assets/img/item/2.webp"},{title:"Посты управления на стене (2 шт.) и платформе",data:5e4,img:"./assets/img/item/3.webp"},{title:"Посты управления на стойке (2 шт.) и платформе",data:5e4,img:"./assets/img/item/4.webp"}]},{title:"Кнопка вызова",options:[{title:"Не устанавливать",data:0,img:"./assets/img/item/1.webp"},{title:"Установить",data:1e4,img:"./assets/img/item/2.webp"}]},{title:"Цвет",options:[{title:"Cерый цвет",data:0,img:"./assets/img/item/1.webp"},{title:"Коричневый цвет",data:0,img:"./assets/img/item/2.webp"},{title:"Индивидуальный цвет",data:1e4,img:"./assets/img/item/2.webp"}]}];function updateStep(t){step.innerHTML=`<div class="item-constuctor__question">${formSteps[t].title}</div>`,"Оставить заявку"!==formSteps[t].title?formSteps[t].options.forEach(t=>{step.innerHTML+=`<a class="btn-light item-constuctor__btn" data-img=${t.img} data-price="${t.data}">${t.title}</a>`}):(step.innerHTML+=`
        <input type="text" required name="text-input" id="" placeholder="Ваше имя">
        <input type="tel" required name="tel-input" id="" placeholder="Ваш телефон">
        <textarea name="textaria" id="" cols="10" rows="5" placeholder="Ваш вопрос"></textarea>
        <div class="checkbox">
        <input type="checkbox" class="custom-checkbox" name="form-constructor-checkbox" id="form-constructor-checkbox"><label for="form-constructor-checkbox">
            Согласен на обработку персональных данных</label>
        </div>
        `,updateCheckbox()),(activeStep<formSteps.length-1?updateBtns:updateControls)(),updatePoints(),updateLine()}function updateBtns(){if(activeStep<formSteps.length-1){const e=document.querySelectorAll(".item-constuctor__btn");e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(t=>{t.classList.remove("active")}),t.classList.add("active"),priceArray[activeStep+1]=Number(t.dataset.price),updateImg(t.dataset.img),updatePrice(),updateControls(e)})}),updateImg(e[0].dataset.img),updateControls(e)}}function checkActivatedBtn(t){let e=!1;return t.forEach(t=>{t.classList.contains("active")&&(e=!0)}),e}function updateControls(t){0===activeStep&&prev.setAttribute("disabled",!0),0<activeStep&&prev.removeAttribute("disabled"),activeStep===formSteps.length-1&&next.setAttribute("disabled",!0),activeStep<formSteps.length-1&&next.removeAttribute("disabled"),activeStep<formSteps.length-1&&(checkActivatedBtn(t)&&activeStep!==formSteps.length-1&&next.removeAttribute("disabled"),checkActivatedBtn(t)||next.setAttribute("disabled",!0)),updateSubmit()}function updateSubmit(){activeStep===formSteps.length-1&&constructorCheckbox.checked?submitBtn.removeAttribute("disabled"):submitBtn.setAttribute("disabled",!0)}function updateCheckbox(){(constructorCheckbox=document.getElementById("form-constructor-checkbox")).onchange=()=>{updateSubmit()}}function updatePrice(){let t=0;for(var e of Object.values(priceArray))t+=e;price.innerHTML=t.toLocaleString("ru-RU")}function updatePoints(){for(let t=0;t<formSteps.length;t++)t<=activeStep?pointsArray[t]=!0:pointsArray[t]=!1;points.innerHTML="";for(let t=0;t<formSteps.length;t++)points.innerHTML+=`<div class="item-constuctor__point ${pointsArray[t]?"active":""}"><span>${t+1}</span></div>`}function updateLine(){activeStep===formSteps.length-1?line.style.width="99%":line.style.width=activeStep/(formSteps.length-1)*100+"%"}function updateImg(t){img.src=t}next.addEventListener("click",t=>{t.preventDefault(),activeStep<formSteps.length&&updateStep(++activeStep)}),prev.addEventListener("click",t=>{t.preventDefault(),0<activeStep&&(priceArray[activeStep]=0,priceArray[activeStep+1]=0,updatePrice(),updateStep(--activeStep))}),window.onload=()=>{formSteps.push({title:"Оставить заявку"}),updateStep(0)};